# Payments

On Invoiced we use the Transaction concept to represent any monetary value that is transferred between a merchant and customer. In our world, if an invoice describes a balance owed by a customer then a transaction represents the payment of that balance. Transactions can also describe other types of value transfer beyond payments, like refunds and credits.

A transaction can be one of these types:

- `charge`: an electronic charge or payment
- `payment`: offline payment received from the customer, i.e. a check
- `refund`: money refunded to the customer
- `adjustment`: a debit or credit to the customer's credit balance

We automatically record `charge` and `refund` transactions that happen through Invoiced for you. Transactions can be associated with a document, like an invoice or credit note, however not all transactions will reference a document.

We currently support the following payment methods on transactions:

- `credit_card`
- `ach`
- `direct_debit`
- `paypal`
- `wire_transfer`
- `check`
- `cash`
- `other`

`adjustment` transactions will always use the `balance` payment method. Since our system is designed from the perspective of the merchant, a negative adjustment represents a credit to the customer and a positive adjustment represents a charge to the customer. For example, if you wanted to credit your customer for $20 then you would create an `adjustment` transaction for -$20. Furthermore, adjustments can have a credit note associated.

## Transaction Object

### Attributes

```shell
<%= json data.transactions.object %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=20939> JSON: <%= json data.transactions.object %>
```

```php
Invoiced\Transaction JSON: <%= json data.transactions.object %>
```

```python
<Transaction id=20939 at 0x3fdbf95e4d08> JSON: <%= json data.transactions.object %>
```

```java
com.invoiced.entity.Transaction@4ed0a875 JSON: <%= json data.transactions.object %>
```

```csharp
Invoiced.Transaction<20939> <%= json data.transactions.object %>
```

```go
<Transaction id=20939 at 4ed0a875> JSON: <%= json data.transactions.object %>
```

Parameter | Type | Description
--------- | ---- | -----------
**id** | *integer* | The transaction's unique ID
**object** | *string* | Object type, `transaction`
**customer** | *integer* | Associated Customer
**invoice** | *integer* | Associated Invoice, if any
**credit_note** | *integer* | Associated Credit Note, if any
**date** | *timestamp* | Transaction date
**type** | *string* | Transaction type, `charge`, `payment`, `refund`, or `adjustment`
**method** | *string* | Payment instrument used to facilitate transaction
**status** | *string* | Transaction status, one of `succeeded`, `pending`, or `failed`
**gateway** | *string* | Payment gateway that processed the transaction, if any
**gateway_id** | *string* | Transaction ID from the payment gateway
**payment_source** | *object* | Payment source used for transaction, if any
**currency** | *string* | [3-letter ISO code](https://en.wikipedia.org/wiki/ISO_4217)
**amount** | *number* | Transaction amount
**notes** | *string* | Internal notes
**failure_reason** | *string* | Failure message from the payment gateway (only available when `status` = `failed`)
**parent_transaction** | *integer* | ID of the original transaction for refunds
**pdf_url** | *string* | URL to download the receipt as a PDF
**created_at** | *timestamp* | Timestamp when created
**metadata** | *object* | A hash of key/value pairs that can store additional information about this object.

## Payment Object

### Attributes

```shell
<%= json data.payments.object %>
```

```ruby
#<Invoiced::Payment:0x3fdbf95e4d08 id=61> JSON: <%= json data.payments.object %>
```

```php
Invoiced\Payment JSON: <%= json data.payments.object %>
```

```python
<Payment id=61 at 0x3fdbf95e4d08> JSON: <%= json data.payments.object %>
```

```java
com.invoiced.entity.Payment@4ed0a875 JSON: <%= json data.payments.object %>
```

```csharp
Invoiced.Payment<61> <%= json data.payments.object %>
```

```go
<Payment id=61 at 4ed0a875> JSON: <%= json data.payments.object %>
```

Parameter | Type | Description
--------- | ---- | -----------
**id** | *integer* | The payment's unique ID
**object** | *string* | Object type, `payment`
**customer** | *integer* | Associated Customer, if any
**date** | *timestamp* | Payment date
**currency** | *string* | [3-letter ISO code](https://en.wikipedia.org/wiki/ISO_4217)
**amount** | *number* | Payment amount
**balance** | *number* | Unapplied amount remaining
**matched** | *boolean* | When true there is a CashMatch suggestion
**voided** | *boolean* | Indicates that the payment was voided
**method** | *string* | Payment instrument used to facilitate transaction
**ach_sender_id** | *string* | ACH PPD ID
**reference** | *string* | Reference number, i.e. check #
**source** | *string* | Source of the payment
**notes** | *string* | Internal notes
**created_at** | *timestamp* | Timestamp when created

## Create a transaction

```shell
curl "https://api.invoiced.com/transactions" \
  -u {API_KEY}: \
  -d invoice=44648 \
  -d method="check" \
  -d gateway_id="1450" \
  -d amount=800
```

```ruby
invoiced.Transaction.create(
  :invoice => 44648,
  :method => "check",
  :gateway_id => "1450",
  :amount => 800
)
```

```php
<?php

$invoiced->Transaction->create([
  'invoice' => 44648,
  'method' => "check",
  'gateway_id' => "1450",
  'amount' => 800
]);
```

```python
client.Transaction.create(
  invoice=44648,
  method="check",
  gateway_id="1450",
  amount=800
)
```

```java
Transaction transaction = invoiced.newTransaction();
transaction.invoice = 44648;
transaction.method = "check";
transaction.gatewayId = "1450";
transaction.amount = 800;
transaction.create();
```

```csharp
var transaction = invoiced.NewTransaction();
transaction.Invoice = 44648;
transaction.Method = "check";
transaction.GatewayId = "1450";
transaction.Amount = 800;
transaction.Create();
```

```go
transaction := invoiced.NewTransaction()
transaction.Invoice = 44648
transaction.Method = "check"
transaction.GatewayId = "1450"
transaction.Amount = 800
transaction, err := transaction.Create(transaction)
```

> The above command returns JSON structured like this:

```shell
<%= json data.transactions.create %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=30939> JSON: <%= json data.transactions.create %>
```

```php
Invoiced\Transaction JSON: <%= json data.transactions.create %>
```

```python
<Transaction id=20939 at 0x3fdbf95e4d08> JSON: <%= json data.transactions.create %>
```

```java
com.invoiced.entity.Transaction@4ed0a875 JSON: <%= json data.transactions.create %>
```

```csharp
Invoiced.Transaction<20939> <%= json data.transactions.create %>
```

```go
<Transaction id=20939 at 4ed0a875> JSON: <%= json data.transactions.create %>
```

Create a new transaction with this endpoint.

### HTTP Request

`POST /transactions`

### Attributes

Parameter | Type | Description
--------- | ---- | -----------
**customer** | *integer* | Customer ID, required if invoice ID is not supplied
**invoice** | *integer* | Invoice ID, if any
**credit_note** | *integer* | Associated Credit Note, if any
**type** | *string* | Transaction type, `charge`, `payment`, `refund`, or `adjustment` - **required**
**date** | *timestamp* | Transaction date, defaults to current timestamp
**method** | *string* | Payment instrument used to facilitate transaction, defaults to `other`
**status** | *string* | Transaction status, one of `succeeded`, `pending`, or `failed`, defaults to `succeeded`
**gateway** | *string* | Payment gateway that processed the transaction, if any
**gateway_id** | *string* | Transaction ID from the payment gateway, or check # if method is `check`
**currency** | *string* | [3-letter ISO code](https://en.wikipedia.org/wiki/ISO_4217)
**amount** | *number* | Transaction amount
**notes** | *string* | Internal notes
**metadata** | *object* | A hash of key/value pairs that can store additional information about this object.

## Retrieve a transaction

```shell
curl "https://api.invoiced.com/transactions/:id" \
  -u {API_KEY}:
```

```ruby
transaction = invoiced.Transaction.retrieve("{TRANSACTION_ID}")
```

```php
<?php

$transaction = $invoiced->Transaction->retrieve("{TRANSACTION_ID}");
```

```python
transaction = client.Transaction.retrieve("{TRANSACTION_ID}")
```

```java
Transaction transaction = invoiced.newTransaction().retrieve({TRANSACTION_ID});
```

```csharp
var transaction = invoiced.NewTransaction().Retrieve({TRANSACTION_ID});
```

```go
transaction, err := invoiced.NewTransaction().Retrieve({TRANSACTION_ID})
```

> The above command returns JSON structured like this:

```shell
<%= json data.transactions.object %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=20939> JSON: <%= json data.transactions.object %>
```

```php
Invoiced\Transaction JSON: <%= json data.transactions.object %>
```

```python
<Transaction id=20939 at 0x3fdbf95e4d08> JSON: <%= json data.transactions.object %>
```

```java
com.invoiced.entity.Transaction@4ed0a875 JSON: <%= json data.transactions.object %>
```

```csharp
Invoiced.Transaction<20939> <%= json data.transactions.object %>
```

```go
<Transaction id=20939 at 4ed0a875> JSON: <%= json data.transactions.object %>
```

This endpoint retrieves a specific transaction.

### HTTP Request

`GET /transactions/:id`

## Update a transaction

```shell
curl "https://api.invoiced.com/transactions/:id" \
  -u {API_KEY}: \
  -d notes="Check was received by Jan" \
  -X PATCH
```

```ruby
transaction.notes = "Check was received by Jan"
transaction.save
```

```php
<?php

$transaction->notes = "Check was received by Jan";
$transaction->save();
```

```python
transaction.notes = "Check was received by Jan"
transaction.save()
```

```java
transaction.notes = "Check was received by Jan";
transaction.save();
```

```csharp
transaction.Notes = "Check was received by Jan";
transaction.SaveAll();
```

```go
transaction.Notes = "Check was received by Jan"
err := transaction.Save()
```

> The above command returns JSON structured like this:

```shell
<%= json data.transactions._update %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=20939> JSON: <%= json data.transactions._update %>
```

```php
Invoiced\Transaction JSON: <%= json data.transactions._update %>
```

```python
<Transaction id=20939 at 0x3fdbf95e4d08> JSON: <%= json data.transactions._update %>
```

```java
com.invoiced.entity.Transaction@4ed0a875 JSON: <%= json data.transactions._update %>
```

```csharp
Invoiced.Transaction<20939> <%= json data.transactions._update %>
```

```go
<Transaction id=20939 at 4ed0a875> JSON: <%= json data.transactions._update %>
```

Use this endpoint to update a transaction.

### HTTP Request

`PATCH /transactions/:id`

### Request Parameters

Parameter | Type | Description
--------- | ---- | -----------
**date** | *timestamp* | Transaction date, defaults to current timestamp
**method** | *string* | Payment instrument used to facilitate transaction, defaults to `other`
**status** | *string* | Transaction status, one of `succeeded`, `pending`, or `failed`, defaults to `succeeded`
**gateway** | *string* | Payment gateway that processed the transaction, if any
**gateway_id** | *string* | Transaction ID from the payment gateway, or check # if method is `check`
**currency** | *string* | [3-letter ISO code](https://en.wikipedia.org/wiki/ISO_4217)
**amount** | *number* | Transaction amount
**notes** | *string* | Internal notes
**metadata** | *object* | A hash of key/value pairs that can store additional information about this object.

## Send a receipt

```shell
curl "https://api.invoiced.com/transactions/:id/emails" \
  -u {API_KEY}: \
  -X POST
```

```ruby
emails = transaction.send
```

```php
<?php

$emails = $transaction->send();
```

```python
emails = transaction.send()
```

```java
EmailRequest emailRequest = new EmailRequest();
EmailRecipient[] emailRecipients = new EmailRecipient[1];
emailRecipients[0] = new EmailRecipient();
emailRecipients[0].name = "Client";
emailRecipients[0].email = "client@example.com";
emailRequest.to = emailRecipients;
emailRequest.subject = "Receipt for your recent payment to Dunder Mifflin, Inc.";
emailRequest.message = "Dear Client, we have attached a receipt for your most recent payment. Thank you!";
Email[] emails = transaction.send(emailRequest);
```

```csharp
var emailRequest = new EmailRequest();
var emailRecipients = new EmailRecipient[1];
emailRecipients[0] = new EmailRecipient();
emailRecipients[0].Name = "Client";
emailRecipients[0].Email = "client@example.com";
emailRequest.To = emailRecipients;
emailRequest.Subject = "Receipt for your recent payment to Dunder Mifflin, Inc.";
emailRequest.Message = "Dear Client, we have attached a receipt for your most recent payment. Thank you!";
var emails = transaction.SendEmail(emailRequest);
```

```go
var emailRequest invdendpoint.EmailRequest
emailRecipients := make([]invdendpoint.EmailDetail, 1)
emailRecipients[0].Name = "Client"
emailRecipients[0].Email = "client@example.com"

emailRequest.To = emailRecipients
emailRequest.Subject = "Receipt for your recent payment to Dunder Mifflin, Inc."
emailRequest.Message = "Dear Client, we have attached a receipt for your most recent payment. Thank you!"

emails, err := transaction.SendEmail(&emailRequest)
```

> The above command returns JSON structured like this:

```shell
[
	<%= json data.emails.receipt, 1 %>
]
```

```ruby
[
  #<Invoiced::Email:0x3fdbf95e4d08 id=f45382c6fbc44d44aa7f9a55eb2ce731> JSON: <%= json data.emails.receipt, 1 %>
]
```

```php
[
  Invoiced\Email JSON: <%= json data.emails.receipt, 1 %>
]
```

```python
[
  <Email id=f45382c6fbc44d44aa7f9a55eb2ce731 at 0x3fdbf95e4d08> JSON: <%= json data.emails.receipt, 1 %>
]
```

```java
//To pretty print a array of Objects use Arrays.toString(Object[]);
[
  com.invoiced.entity.Email@12497547 JSON: <%= json data.emails.receipt, 1 %>
]
```

```csharp
[
  Invoiced.Email<f45382c6fbc44d44aa7f9a55eb2ce731> <%= json data.emails.receipt, 1 %>
]
```

```go
[
  <Email id=f45382c6fbc44d44aa7f9a55eb2ce731 at 12497547> JSON: <%= json data.emails.receipt, 1 %>
]
```

This endpoint sends a PDF receipt to the customer.

### HTTP Request

`POST /transactions/:id/emails`

### Request Parameters

Parameter | Type | Description
--------- | ---- | -----------
**to** | *array* | Optional array of recipients like:<br/>`[{"name": "Client", "email": "client@example.com"}]`
**bcc** | *string* | Optional comma-separated list of email addresses to be blind carbon copied
**template** | *string* | Optional email template ID, otherwise a standard email template is selected
**subject** | *string* | Optional subject to override the template
**message** | *string* | Optional message body to override the template

<aside class="info">
A successful response means that your email has been added to the send queue.
</aside>

## Refund a transaction

```shell
curl "https://api.invoiced.com/transactions/:id/refunds" \
  -u {API_KEY}: \
  -X POST
```

```ruby
refund = transaction.refund(:amount => 400)
```

```php
<?php

$refund = $transaction->refund(['amount' => 400]);
```

```python
refund = transaction.refund(amount=400)
```

```java
Transaction refund = transaction.refund(400);
```

```csharp
var refund = transaction.Refund(400);
```

```go
err := transaction.Refund(400)
```

> The above command returns JSON structured like this:

```shell
<%= json data.transactions.refund %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=20952> JSON: <%= json data.transactions.refund %>
```

```php
Invoiced\Transaction JSON: <%= json data.transactions.refund %>
```

```python
<Transaction id=20952 at 0x3fdbf95e4d08> JSON: <%= json data.transactions.refund %>
```

```java
com.invoiced.entity.Transaction@424ba398 JSON: <%= json data.transactions.refund %>
```

```csharp
Invoiced.Transaction<20952> <%= json data.transactions.refund %>
```

```go
<Transaction id=20952 at 424ba398> JSON: <%= json data.transactions.refund %>
```

You can issue a refund for `charge` and `payment` transactions. When a refund is issued for a `charge` transaction we will attempt to initiate the refund over the payment gateway it happened on.

Of course, when refunding `payment` transactions you would have to return the money to your customer. This endpoint simply provides a means to track any refunds that you issue for offline payments.

Partial refunds are allowed, however, the total amount refunded cannot exceed the original transaction amount.

### HTTP Request

`POST /transactions/:id/refunds`

### Request Parameters

Parameter | Type | Description
--------- | ---- | -----------
**amount** | *number* | Amount to refund - **required**

<aside class="notice">
We will initiate the refund through the payment gateway for <code>charge</code> transactions that have a valid payment gateway attached.
</aside>

## Delete a transaction

```shell
curl "https://api.invoiced.com/transactions/:id" \
  -u {API_KEY}: \
  -X DELETE
```

```ruby
transaction.delete
```

```php
<?php

$transaction->delete();
```

```python
transaction.delete()
```

```java
transaction.delete();
```

```csharp
transaction.Delete();
```

```go
transaction.Delete()
```

> The above command returns `204 No Content`

This endpoint deletes a specific transaction.

### HTTP Request

`DELETE /transactions/:id`

## List all transactions

```shell
curl "https://api.invoiced.com/transactions" \
  -u {API_KEY}:
```

```ruby
transactions, metadata = invoiced.Transaction.list(:per_page => 3)
```

```php
<?php

list($transactions, $metadata) = $invoiced->Transaction->all(['per_page' => 3]);
```

```python
transactions, metadata = client.Transaction.list(per_page=3)
```

```java
EntityList<Transaction> transactions = invoiced.newTransaction().listAll();
```

```csharp
var transactions = invoiced.NewTransaction().ListAll();
```

```go
transactions, err := invoiced.NewTransaction().ListAll(nil, nil)
```

> The above command returns JSON structured like this:

```shell
[
	<%= json data.transactions.object, 1 %>
]
```

```ruby
[
  #<Invoiced::Transaction:0x3fdbf95e4d08 id=20939> JSON: <%= json data.transactions.object, 1 %>
]
```

```php
[
  Invoiced\Transaction JSON: <%= json data.transactions.object, 1 %>
]
```

```python
[
  <Transaction id=20939 at 0x3fdbf95e4d08> JSON: <%= json data.transactions.object, 1 %>
]
```

```java
[
  com.invoiced.entity.Transaction@52638766 JSON: <%= json data.transactions.object, 1 %>
]
```

```csharp
[
  Invoiced.Transaction<20939> <%= json data.transactions.object, 1 %>
]
```

```go
[
  <Transaction id=20939 at 52638766> JSON: <%= json data.transactions.object, 1 %>
]
```

This endpoint retrieves all transactions.

### HTTP Request

`GET /transactions`

### Query Parameters

Parameter | Description
--------- | -----------
**sort** *string* | Column to sort by, i.e. `name asc`
**filter** *object* | Filter object
**metadata** *object* | Metadata filter object
**start_date** *timestamp* | Restricts the results to transactions *on or after* the given timestamp
**end_date** *timestamp* | Restricts the results to transactions *on or before* the given timestamp
**updated_after** *timestamp* | Only gets records updated after the given timestamp

## Initiate a charge

```shell
# (Tokenized Payment Info)

curl 'https://api.invoiced.com/charges' \
  -u API_KEY: \
  --data '{"customer":401558,"currency":"usd","amount":2000,"applied_to":[{"type":"invoice","invoice":2112620,"amount":1710},{"type":"invoice","invoice":2112622,"amount":290}],"method":"credit_card","invoiced_token":"acdf7f31da641970cdb9c6c46a373577"}'

# (Saved Payment Source)

curl 'https://api.invoiced.com/charges' \
  -u API_KEY: \
  --data '{"customer":401558,"currency":"usd","amount":2000,"applied_to":[{"type":"invoice","invoice":2112620,"amount":1710},{"type":"invoice","invoice":2112622,"amount":290}],"method":"credit_card","payment_source_type":"card","payment_source_id":1234}'
```

```ruby

charge = transaction.initiate_charge(
  :customer => 401558,
  :currency => "usd",
  :amount => 2000,
  :applied_to => [...], # excluded for brevity
  :method => "credit_card",

# (Tokenized Payment Info)
  :invoiced_token => "acdf7f31da641970cdb9c6c46a373577",

# (Saved Payment Source)
  :payment_source_type => "card",
  :payment_source_id => 1234
)
```

```php
<?php

$charge = $transaction->initiateCharge([
  'customer' => 401558,
  'currency' => "usd",
  'amount' => 2000,
  'applied_to' => [...], // excluded for brevity
  'method' => "credit_card",

// (Tokenized Payment Info)
  'invoiced_token' => "acdf7f31da641970cdb9c6c46a373577",

// (Saved Payment Source)
  'payment_source_type' => "card",
  'payment_source_id' => 1234
]);
```

```python
charge = transaction.initiate_charge(
  customer = 401558,
  currency = "usd",
  amount = 2000,
  applied_to = [...], # excluded for brevity
  method = "credit_card",

# (Tokenized Payment Info)
  invoiced_token = "acdf7f31da641970cdb9c6c46a373577",

# (Saved Payment Source)
  payment_source_type = "card",
  payment_source_id = 1234
)
```

```java
ChargeRequest chargeRequest = new ChargeRequest();
chargeRequest.customer = 401558;
chargeRequest.currency = "usd";
chargeRequest.amount = 2000;
chargeRequest.appliedTo = [...]; // excluded for brevity
chargeRequest.method = "credit_card";

// (Tokenized Payment Info)
chargeRequest.invoicedToken = "acdf7f31da641970cdb9c6c46a373577";

// (Saved Payment Source)
chargeRequest.paymentSourceType = "card";
chargeRequest.paymentSourceId = 1234;

Transaction charge = invoiced.newTransaction().initiateCharge(chargeRequest);
```

```csharp
var chargeRequest = new ChargeRequest();
chargeRequest.Customer = 401558;
chargeRequest.Currency = "usd";
chargeRequest.Amount = 2000;
chargeRequest.AppliedTo = [...]; // excluded for brevity
chargeRequest.Method = "credit_card";

// (Tokenized Payment Info)
chargeRequest.InvoicedToken = "acdf7f31da641970cdb9c6c46a373577";

// (Saved Payment Source)
chargeRequest.PaymentSourceType = "card";
chargeRequest.PaymentSourceId = 1234;

var charge = invoiced.NewTransaction().InitiateCharge(chargeRequest);
```

```go
chargeRequest := new(invdendpoint.ChargeRequest)

chargeRequest.Customer = 401558
chargeRequest.Currency = "usd"
chargeRequest.Amount = 2000
chargeRequest.AppliedTo = [...] // excluded for brevity
chargeRequest.Method = "credit_card"

// (Tokenized Payment Info)
chargeRequest.InvoicedToken = "acdf7f31da641970cdb9c6c46a373577"

// (Saved Payment Source)
chargeRequest.PaymentSourceType = "card"
chargeRequest.PaymentSourceId = 1234

charge := invoiced.NewTransaction().InitiateCharge(chargeRequest)
```

> The above command returns JSON structured like this:

```shell
<%= json data.charges.create %>
```

```ruby
#<Invoiced::Transaction:0x3fdbf95e4d08 id=5d9e31d812151> JSON: <%= json data.charges.create %>
```

```php
Invoiced\Transaction JSON: <%= json data.charges.create %>
```

```python
<Transaction id=5d9e31d812151 at 0x3fdbf95e4d08> JSON: <%= json data.charges.create %>
```

```java
com.invoiced.entity.Transaction@4ed0a875 JSON: <%= json data.charges.create %>
```

```csharp
Invoiced.Transaction<5d9e31d812151> <%= json data.charges.create %>
```

```go
<Transaction id=5d9e31d812151 at 4ed0a875> JSON: <%= json data.charges.create %>
```

Initiate a new charge with this endpoint.

### HTTP Request

`POST /charges`

### Attributes

Requests must supply exactly one of **a)** `payment_source_type` with `payment_source_id`, **b)** `invoiced_token`, or **c)** `gateway_token`.

Parameter | Type | Description
--------- | ---- | -----------
**customer** | *integer* | Customer ID, required
**method** | *integer* | Payment method ID, required
**currency** | *string* | Optional, defaults to company currency
**amount** | *number* | Charge amount, required
**invoiced_token** | *string* | Optional, generated by `invoiced.js`
**gateway_token** | *string* | Optional, generated by payment gateway
**payment_source_type** | *string* | One of `card`, `bank_account`
**payment_source_id** | *number* | Optional, card or bank account ID
**vault_method** | *boolean* | Optional; when true, vaults the payment source on the customer's account
**make_default** | *boolean* | Optional; when this and `vault_method` are true, saves payment as default on customer's account
**receipt_email** | *string* | Optional; where the payment receipt is sent
**applied_to** | *array* | Required, payment application

#### Payment application data structure

Parameter | Type | Description
--------- | ---- | -----------
**amount** | *number* | Amount to apply
**type** | *string* | One of `credit`, `estimate`, or `invoice`
**invoice** | *integer* | Invoice ID, required when `type=invoice`
**estimate** | *integer* | Estimate ID, required when `type=estimate`
